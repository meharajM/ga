<script src="js/bootstrap-datepicker.min.js"></script>
<div class="bg-light border">
    <div class="text-center pt-2 pb-1 mt-2 mb-2">
                    <div class="fa fa-angle-left prev"  id="previous_day"></div>
                    <input id="date" name="date" type="text" style="text-align:center"/>
                    <div class="fa fa-angle-right next" id="next_day">
                    </div>

    </div>
        <div class="row	mt-2 mb-2 pt-2 pb-1">
            <div class="col-sm-12 text-center">
                <div class="filter-area">
                    <div class="btn-group btn-group-sm" data-toggle="buttons">
                        <label class="all-button btn btn-light active">
                            <input class='filter-btn' type="radio" name="filter_1" value="all" id="all" autocomplete="off" checked="checked">All<sup><span id="all_button"></span></sup>
                        </label>
                        <label class="pending-button btn btn-light">
                            <input class='filter-btn' type="radio" name="filter_1" value="booked" id="pending" autocomplete="off">Pending<sup><span id="pending_button"></span></sup>
                        </label>
                        <label class="closed-button btn btn-light">
                            <input class='filter-btn' type="radio" name="filter_1" value="closed" id="closed" autocomplete="off">Closed<sup><span id="closed_button"></span></sup>
                        </label>
                    </div>

                    <div class="btn-group btn-group-sm" data-toggle="buttons">
                        <label class="btn btn-light active">
                            <input class='filter-btn' type="radio" name="filter_2" value="all_filter_2" id="all_filter_2" autocomplete="off"  checked="checked">All
                        </label>
                        <label class="btn btn-light">
                            <input class='filter-btn' type="radio" name="filter_2" value="VC" id="video1" autocomplete="off" ><i class="fa fa-video-camera"></i>
                        </label>
                        <label class="btn btn-light">
                            <input class='filter-btn' type="radio" name="filter_2" value="PC" id="physical1" autocomplete="off"><i class="fa fa-user"></i>
                        </label>
                    </div>
                </div>

            </div>
        </div>

</div>

<script>
    $(document).ready(function () {
        var filter1, filter2;
        $('.filter-btn').on('change',  function(ev){
            if( 'all' == ev.target.value){
                filter1 = undefined;
            }else if('all_filter_2'==ev.target.value) {
                filter2= undefined;
            }

            if(ev.target.name == 'filter_1' && 'all' != ev.target.value){
                filter1  = ev.target.value;
            }else if(ev.target.name == 'filter_2' && 'all_filter_2'!=ev.target.value){
                filter2 = ev.target.value;
            }
            var filteredAppointments = appointment_list.filter(function(val) {
                if(filter1 && filter2){
                    return val.appointment_status == filter1 && val.appointment_type == filter2;
                }else if(filter1){
                    return val.appointment_status == filter1;
                }else if(filter2){
                    return val.appointment_type == filter2;
                }else {
                    return true;
                }
            });
            showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
        });
            $("#date").datepicker({
            format: 'DD, dd-M-yy',
	        changeMonth: true,
            changeYear: true,
            minDate: 0,
            todayHighlight: true,
            autoclose: true
        }).on('changeDate', function(e){
                var actualDate= e.date;
                var date=moment(actualDate).format("YYYYMMDD");
                getData.getDashboardData(date).then(function(res){
                    appointment_list=res.appointments_details.appointment;
                    showDashboardDetails(res);
                });
               /* $("#all:input").prop("checked", true);
                debugger;
                $("#all_filter_2:input").prop("checked", true);*/

              /*  $('input[type=radio]').prop('checked', function () {
                    return this.getAttribute('checked') == 'checked';
                }); */
              //  $("input:checked").removeAttr("checked");
            });


       /*     $("#next_day").on("click", function(){
                $('input[type=radio]').prop('checked', function () {
                    return this.getAttribute('checked') == 'checked';
                });*/

//        $("input[name='filter_1']").change(function(){
//            if($(this).val()=="Pending")
//            {
//                var filteredAppointments = appointment_list.filter(function(val) {
//                    return val.appointment_status == 'booked';
//                });
//                showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
//            }
//            else if($(this).val()=="Closed")
//            {
//                var filteredAppointments = appointment_list.filter(function(val) {
//                    return val.appointment_status == 'closed';
//                });
//                showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
//            }
//            else
//            {
//                var filteredAppointments = appointment_list.filter(function(val) {
//                    return val;
//                });
//                showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
//
//            }
//        });
//
//        $("input[name='filter_2']").change(function(){
//            if($(this).val()=="video")
//            {
//                var filteredAppointments = appointment_list.filter(function(val) {
//                    return val.appointment_type == 'VC';
//                });
//                showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
//            }
//            else if($(this).val()=="physical")
//            {
//                var filteredAppointments = appointment_list.filter(function(val) {
//                    return val.appointment_type == 'PC';
//                });
//                showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
//            }
//
//            else
//            {
//                var filteredAppointments = appointment_list.filter(function(val) {
//                    return val;
//                });
//                showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
//
//            }
//        });
/*
       $("#f").on('click', function () {
            getData.getPrescriptionTemplateList(1);
            getData.getMyprescriptionTemplateDetails(1);
            getData.getMymedicineList();
        });
        */






/*
            $("#booked").on("click", function (evt) {
                var filteredAppointments = appointment_list.filter(function(val) {
                    return val.appointment_status == 'booked';
                });
                showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
                evt.preventDefault();
            });

        $("#closed").on("click", function (evt) {
            var filteredAppointments = appointment_list.filter(function(val) {
                return val.appointment_status == 'closed';
            });
            showDashboardDetails({appointments_details: {appointment: filteredAppointments}}    );
            evt.preventDefault();
        });
*/


         var current_date = new Date();
         var options = { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' };
         $(function () {
            // This writes out the current date to the text field as starter
            $('#date').val(current_date.toLocaleDateString('en-US', options));
            // Hook up previous button event
            $('#previous_day').click(function () {
                // Set our current date to 1 day earlier
                current_date.setDate(current_date.getDate() - 1);
                // Write the result to our text input
                $('#date').val(current_date.toLocaleDateString('en-US', options));
                var actualDate = new Date(current_date); // convert to actual date;
                var date=moment(actualDate).format("YYYYMMDD");
                getData.getDashboardData(date).then(function(res){
                    appointment_list=res.appointments_details.appointment;
                    showDashboardDetails(res);
                }).catch(function(error){
                    console.error(error);
                })
            });
            // Hook up next button event
            $('#next_day').click(function () {
                // Set our current date to 1 day later
                current_date.setDate(current_date.getDate() + 1);
                // Write the result to our text input
                $('#date').val(current_date.toLocaleDateString('en-US', options));
                var actualDate = new Date(current_date); // convert to actual date;
                var date=moment(actualDate).format("YYYYMMDD");
                getData.getDashboardData(date).then(function(res){
                    appointment_list=res.appointments_details.appointment;
                    showDashboardDetails(res);
                }).catch(function(error){
                    console.error(error);
                })
            });
        });
    })
</script>